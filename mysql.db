--创建数据库
CREATE DATABASE music;
--创建一张表
CREATE TABLE categories
(
  cate_id INT (12) NOT NULL PRIMARY  KEY AUTO_INCREMENT,
  cate_name VARCHAR (255) NOT NULL
)DEFAULT CHARSET = utf8;

-- 分类表初始化数据
INSERT INTO categories (cate_id, cate_name) VALUES
(1,'华语'),
(2,'欧美'),
(3,'韩国'),
(4,'日本');


--歌手表
DROP TABLE IF EXISTS artist;
CREATE TABLE artist
(
artist_id INT (12) NOT NULL PRIMARY KEY AUTO_INCREMENT,
artist_name VARCHAR (255) NOT NULL,
artist_age SMALLINT (3) NOT NULL,
artist_gender SMALLINT (1) NOT NULL,
artist_avatar VARCHAR (255) NOT NULL
)DEFAULT CHARSET = utf8;

INSERT INTO artist (artist_id, artist_name, artist_age, artist_gender, artist_avatar) VALUES
(1,'林俊杰','30','1','/php/img/1.png'),
(2,'徐良','30','1','/php/img/.png');



--专辑表
DROP TABLE IF EXISTS album;
CREATE TABLE album
(
album_id INT (12) NOT NULL PRIMARY KEY AUTO_INCREMENT ,
album_name VARCHAR (255) NOT NULL ,
album_pic VARCHAR (255) NOT NULL ,
artist_id INT (12) NOT NULL ,
cate_id INT (12) NOT NULL ,
primary_music INT (12) ,
FOREIGN KEY (cate_id)
REFERENCES categories(cate_id) ,
FOREIGN KEY (artist_id)
REFERENCES artist(artist_id)
)DEFAULT CHARSET = utf8;

INSERT INTO album (album_id, album_name, album_pic, artist_id, cate_id, primary_music) VALUES
(1,'她说','/php/img/3.png',1,1,1),
(2,'情话','/php/img/4.png',2,1,1);



--歌曲表
DROP TABLE IF EXISTS music;
CREATE TABLE music
(
mid_id INT (12) NOT NULL PRIMARY KEY AUTO_INCREMENT,
name VARCHAR (255) NOT NULL ,
duration VARCHAR (255) NOT NULL ,
album_id INT (12) NOT NULL,
src VARCHAR (255) NOT NULL,
FOREIGN KEY (album_id)
REFERENCES album(album_id)
)DEFAULT CHARSET = utf8;


INSERT INTO music (mid_id, name, duration, album_id) VALUES
(1,'她说','03:08',1),
(2,'爱笑的眼睛','03:10',1),
(3,'一眼万年','03:11',1),
(4,'当你','03:05',1),
(5,'那时雨','03:08',2),
(6,'女骑士','03:12',2),
(7,'他的猫','03:19',2),
(8,'一公里的幸福','03:20',2);

DROP TABLE IF EXISTS hot;
CREATE TABLE hot
(
 hot_id INT (12) NOT NULL PRIMARY KEY AUTO_INCREMENT,
 album_id INT (12) NOT NULL
)DEFAULT CHARSET=utf8;
-- 外键
ALTER TABLE hot
ADD CONSTRAINT FOREIGN KEY (hot_id) REFERENCES album(album_id);

INSERT INTO hot (hot_id, album_id) VALUES
(1,1),
(2,2);





--视图
CREATE VIEW album_list AS
SELECT
album.album_id,
album.album_name,
album.album_pic,
artist.artist_name,
categories.cate_name
FROM
album,artist,categories
WHERE
album.artist_id=artist.artist_id
AND
album.cate_id=categories.cate_id;

